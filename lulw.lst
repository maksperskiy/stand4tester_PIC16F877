MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         errorlevel -302 
                      00002         PROCESSOR PIC16F877
                      00003         #include<P16F877.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F877 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2011 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00528         LIST
                      00004         org 0x00
0000   0183           00005         clrf STATUS
0001   3000           00006         movlw 0x00
0002   008A           00007         movwf PCLATH
                      00008 
  00000000            00009 INDF                    equ 0x00
  00000020            00010 Mode                    equ 0x20
  00000021            00011 MirrorCounter   equ 0x21 
  00000022            00012 MirrorReg               equ 0x22
  00000024            00013 ShiftB                  equ 0x24
  00000025            00014 ShiftD                  equ 0x25
  00000023            00015 ShiftC                  equ 0x23
  00000026            00016 RowTime                 equ 0x26
  00000027            00017 ColTime                 equ 0x27
  00000028            00018 ErrorTime               equ 0x28
  00000029            00019 sCounter                equ 0x29
  0000002A            00020 AdressHitachi   equ 0x2A
  0000002B            00021 CharHitachi             equ 0x2B
  0000002C            00022 ComRecieve              equ 0x2C
  0000002D            00023 VoltageReg              equ 0x2D
  0000002E            00024 ButtonCode              equ 0x2E
  0000002F            00025 SCheck                  equ 0x2F
  00000030            00026 fCOUNTER                equ 0x30
  00000031            00027 ADCTime                 equ 0x31
  00000032            00028 NumPressKey             equ 0x32
  00000033            00029 PreKey                  equ 0x33
                      00030 
0003   2???           00031         goto begin
                      00032 
0004                  00033 begin   
0004   0187           00034         clrf PORTC
0005   3000           00035         movlw 0x00
0006   0086           00036         movwf PORTB
0007   0088           00037         movwf PORTD     
0008   1303           00038         bcf STATUS,RP1
0009   1683           00039         bsf STATUS,RP0
000A   3087           00040         movlw 0x87
000B   0081           00041         movwf OPTION_REG
000C   0064           00042         clrwdt
000D   30A0           00043         movlw b'10100000'       
000E   0087           00044         movwf TRISC
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000F   3000           00045         movlw 0x00      
0010   0086           00046         movwf TRISB
0011   3000           00047         movlw 0x00      
0012   0088           00048         movwf TRISD
0013   3038           00049         movlw b'00111000'       
0014   0085           00050         movwf TRISA
0015   1283           00051         bcf STATUS,RP0
0016   2???           00052         call init_com
0017   2???           00053         call clear_chars
0018   2???           00054         call read_com
0019   2???           00055         goto mode_select
                      00056         
001A                  00057 clear_chars:
001A   3040           00058         movlw 0x40
001B   0084           00059         movwf FSR
001C                  00060 CC_Loop
001C   0064           00061         clrwdt
001D   3020           00062         movlw 0x20
001E   0080           00063         movwf INDF
001F   0A84           00064         incf FSR,F
0020   0804           00065         movf FSR,W
0021   3A60           00066         xorlw 0x60
0022   1D03           00067         btfss STATUS,Z
0023   2???           00068         goto CC_Loop
0024   0008           00069         return
                      00070 
                      00071         
0025                  00072 scan_com:
0025   0064           00073         clrwdt
0026   1A8C           00074         btfsc PIR1, RCIF
0027   2???           00075         goto mode_select
0028   0008           00076         return
                      00077 
0029                  00078 mode_select
0029   0064           00079         clrwdt
002A   1103           00080         bcf STATUS,Z
002B   1A8C           00081         btfsc PIR1,RCIF
002C   2???           00082         call read_com
002D   1003           00083         bcf STATUS,0x00
                      00084 
002E   3067           00085         movlw 0x67
002F   062C           00086         xorwf ComRecieve,0
0030   1903           00087         btfsc STATUS,Z
0031   2???           00088         call ADC
                      00089         
0032   3044           00090         movlw 0x44
0033   062C           00091         xorwf ComRecieve,0
0034   1903           00092         btfsc STATUS,Z
0035   2???           00093         call draw_hitachi
                      00094 
0036   3033           00095         movlw 0x33
0037   062C           00096         xorwf ComRecieve,0
0038   1903           00097         btfsc STATUS,Z
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0039   2???           00098         call row
                      00099         
003A   3022           00100         movlw 0x22
003B   062C           00101         xorwf ComRecieve,0
003C   1903           00102         btfsc STATUS,Z
003D   2???           00103         call column
                      00104 
003E   2???           00105         goto mode_select
                      00106         
                      00107 
003F                  00108 col_delay:
003F   0181           00109         clrf TMR0
0040                  00110 col_c1
0040   0064           00111         clrwdt  
0041   30F4           00112         movlw 0xf4
0042   0201           00113         subwf TMR0,0
0043   1D03           00114         btfss STATUS,0x02
0044   2???           00115         goto col_c1
0045   0008           00116         return
                      00117 
                      00118 
0046                  00119 column
0046   2???           00120         call speaker
0047                  00121 col_start
0047   2???           00122         call scan_com
0048   0064           00123         clrwdt
0049   1683           00124         bsf STATUS,RP0
004A   3000           00125         movlw 0x00      
004B   0086           00126         movwf TRISB
004C   3000           00127         movlw 0x00      
004D   0088           00128         movwf TRISD
004E   1283           00129         bcf STATUS,RP0
004F   1303           00130         bcf STATUS,RP1
0050   1003           00131         bcf STATUS,C
0051   30FF           00132         movlw 0xff
0052   0086           00133         movwf PORTB
0053   0088           00134         movwf PORTD
0054   30FF           00135         movlw 0xff
0055   00A5           00136         movwf ShiftD
0056   00A4           00137         movwf ShiftB
0057   3000           00138         movlw 0x00
0058   0084           00139         movwf FSR
                      00140         
0059                  00141 col_loop
0059   0064           00142         clrwdt
005A   0DA4           00143         rlf ShiftB,F
005B   0DA5           00144         rlf ShiftD,F
005C   30FF           00145         movlw 0xff
005D   0086           00146         movwf PORTB
005E   0088           00147         movwf PORTD
005F   301F           00148         movlw 0x1f
0060   0087           00149         movwf PORTC
0061   0824           00150         movf ShiftB,W
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0062   0086           00151         movwf PORTB
0063   0825           00152         movf ShiftD,W
0064   0088           00153         movwf PORTD
0065   2???           00154         call col_delay
0066   0A84           00155         incf FSR,F
0067   0804           00156         movf FSR,W
0068   3A10           00157         xorlw 0x10
0069   1D03           00158         btfss STATUS,Z
006A   2???           00159         goto col_loop
006B   0DA5           00160         rlf ShiftD,F
006C   2???           00161         goto col_start
                      00162         
006D                  00163 row_delay:
006D   0064           00164         clrwdt
006E   3003           00165         movlw 0x03
006F   00A6           00166         movwf RowTime
0070   0181           00167         clrf TMR0
0071                  00168 row_c2
0071   0064           00169         clrwdt  
0072   30FF           00170         movlw 0xff
0073   0201           00171         subwf TMR0,0
0074   1D03           00172         btfss STATUS,0x02
0075   2???           00173         goto row_c2
0076   2???           00174         goto row_d2
0077                  00175 row_d2
0077   0181           00176         clrf TMR0
0078   1103           00177         bcf STATUS,0x02
0079   0064           00178         clrwdt  
007A   0BA6           00179         decfsz RowTime,1
007B   2???           00180         goto row_c2
007C   0008           00181         return
                      00182 
007D                  00183 row
007D   2???           00184         call speaker
007E                  00185 row_start
007E   2???           00186         call scan_com
007F   30FF           00187         movlw 0xff
0080   0086           00188         movwf PORTB
0081   0088           00189         movwf PORTD
0082   3001           00190         movlw 0x01
0083   00A3           00191         movwf ShiftC
0084   0087           00192         movwf PORTC
0085   3000           00193         movlw 0x00
0086   0086           00194         movwf PORTB
0087   0088           00195         movwf PORTD
0088   3000           00196         movlw 0x00
0089   0084           00197         movwf FSR
008A                  00198 row_loop
008A   0064           00199         clrwdt
008B   2???           00200         call row_delay
008C   1003           00201         bcf STATUS,0x00
008D   3000           00202         movlw 0x00
008E   0087           00203         movwf PORTC
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

008F   0DA3           00204         rlf ShiftC,F
0090   0823           00205         movf ShiftC,W
0091   0087           00206         movwf PORTC
0092   0A84           00207         incf FSR,F
0093   0804           00208         movf FSR,W
0094   3A05           00209         xorlw 0x05
0095   1D03           00210         btfss STATUS,Z
0096   2???           00211         goto row_loop
0097   0DA3           00212         rlf ShiftC,F
0098   2???           00213         goto row_start
                      00214 
                      00215 
0099                  00216 read_char:
0099   2???           00217         call read_com
009A   082C           00218         movf ComRecieve,w
009B   00AB           00219         movwf CharHitachi
009C   0008           00220         return
009D                  00221 read_adress:
009D   2???           00222         call read_com
009E   082C           00223         movf ComRecieve,w
009F   172C           00224         bsf ComRecieve,0x06
00A0   082C           00225         movf ComRecieve,W
00A1   00AA           00226         movwf AdressHitachi
00A2   2???           00227         call adress_check
00A3   0008           00228         return
                      00229 
                      00230 
00A4                  00231 write:                                          ;Код записи в Hitachi
00A4   1303           00232         bcf STATUS,RP1
00A5   1283           00233         bcf STATUS,RP0
00A6   0188           00234         clrf PORTD
00A7   0086           00235         movwf PORTB
00A8   1507           00236         bsf PORTC,0x02                  ;Считывание Hitachi
00A9   2???           00237         call delay_write
00AA   1107           00238         bcf PORTC,0x02
00AB   2???           00239         call delay_write
00AC   0008           00240         return
                      00241         
00AD                  00242 delay_write:                            ;Задержка для записи
00AD   0181           00243         clrf TMR0
00AE                  00244 write_c2
00AE   0064           00245         clrwdt  
00AF   3025           00246         movlw 0x25
00B0   0201           00247         subwf TMR0,0
00B1   1D03           00248         btfss STATUS,0x02
00B2   2???           00249         goto write_c2
00B3   0008           00250         return
                      00251 
                      00252 
00B4                  00253 adress_check:
00B4                  00254 more0
00B4   1403           00255         bsf STATUS,C
00B5   3040           00256         movlw 0x40
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00B6   022A           00257         subwf AdressHitachi,0
00B7   1C03           00258         btfss STATUS,C
00B8   2???           00259         goto write_error
00B9   2???           00260         goto less20
00BA                  00261 less20
00BA   3060           00262         movlw 0x60
00BB   022A           00263         subwf AdressHitachi,0
00BC   1803           00264         btfsc STATUS,C
00BD   2???           00265         goto write_error
00BE   0008           00266         return
                      00267         
                      00268 
                      00269 
                      00270 
                      00271 
                      00272 
00BF                  00273 speaker:                                        ;Пищалка
00BF   1487           00274         bsf PORTC,0x01
00C0   2???           00275         call s_segment_counter
00C1   1087           00276         bcf PORTC,0x01
00C2   2???           00277         call s_segment_counter
00C3   1487           00278         bsf PORTC,0x01
00C4   2???           00279         call s_segment_counter
00C5   1087           00280         bcf PORTC,0x01
00C6   2???           00281         call s_segment_counter
00C7   1487           00282         bsf PORTC,0x01
00C8   2???           00283         call s_segment_counter
00C9   1087           00284         bcf PORTC,0x01
00CA   0008           00285         return
                      00286 
                      00287 
                      00288 
                      00289 
00CB                  00290 init_com:
00CB   1683           00291         bsf STATUS, RP0
00CC   1303           00292         bcf STATUS, RP1
00CD   1787           00293         bsf TRISC, 7
00CE   1707           00294         bsf TRISC, 6
00CF   1518           00295         bsf TXSTA, BRGH
00D0   3019           00296         movlw .25
00D1   0099           00297         movwf SPBRG
00D2   1218           00298         bcf TXSTA, SYNC
00D3   1318           00299         bcf TXSTA, TX9
00D4   1283           00300         bcf STATUS, RP0
00D5   1318           00301         bcf RCSTA, RX9
00D6   1798           00302         bsf RCSTA, SPEN
00D7   1618           00303         bsf RCSTA, CREN
00D8   0008           00304         return
                      00305 
00D9                  00306 read_com:
00D9   1283           00307         bcf STATUS, RP0
00DA                  00308 READ
00DA   0064           00309         clrwdt
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00DB   1E8C           00310         btfss PIR1, RCIF
00DC   2???           00311         goto READ  
00DD   1898           00312         btfsc RCSTA, OERR
00DE   2???           00313         goto error1
00DF   1918           00314         btfsc RCSTA, FERR
00E0   2???           00315         goto error2
00E1   081A           00316         movf RCREG,0x00
00E2   00AC           00317         movwf ComRecieve
00E3   0008           00318         return
00E4                  00319 error1
00E4   2???           00320         goto STOP
00E5                  00321 error2 
00E5   2???           00322         goto STOP
00E6   0008           00323         return
                      00324 
00E7                  00325 write_com:
00E7   1683           00326         bsf STATUS, RP0
00E8   1303           00327         bcf STATUS, RP1
00E9   1698           00328         bsf TXSTA, TXEN
00EA   1283           00329         bcf STATUS, RP0
00EB   0099           00330         movwf TXREG
00EC   1683           00331         bsf STATUS, RP0
00ED                  00332 write_check
00ED   1C98           00333         btfss TXSTA, TRMT
00EE   2???           00334         goto write_check
00EF   1298           00335         bcf TXSTA, TXEN
00F0   0008           00336         return
                      00337 
00F1                  00338 draw_hitachi:
00F1   2???           00339         call speaker
                      00340 
00F2   1007           00341         bcf PORTC,0x00
00F3   3001           00342         movlw 0x01
00F4   2???           00343         call write
00F5   3002           00344         movlw 0x02
00F6   2???           00345         call write
00F7   0064           00346         clrwdt
00F8   3038           00347         movlw 0x38
00F9   2???           00348         call write
00FA   3006           00349         movlw 0x06
00FB   2???           00350         call write
00FC   300C           00351         movlw 0x0c
00FD   2???           00352         call write
00FE   1407           00353         bsf PORTC,0x00
00FF   3040           00354         movlw 0x40
0100   0084           00355         movwf FSR
0101   1103           00356         bcf STATUS,Z
0102   0186           00357         clrf PORTB
                      00358         
                      00359 
0103                  00360 wait_char
0103   0064           00361         clrwdt
0104   2???           00362         call delay_write
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0105   1E8C           00363         btfss PIR1, RCIF
0106   2???           00364         goto wait_char  
0107   2???           00365         call read_char
0108                  00366 wait_adress
0108   0064           00367         clrwdt
0109   2???           00368         call delay_write
010A   1E8C           00369         btfss PIR1, RCIF
010B   2???           00370         goto wait_adress        
010C   2???           00371         call read_adress
                      00372 
010D   082A           00373         movf AdressHitachi,w
010E   0084           00374         movwf FSR       
010F   082B           00375         movf CharHitachi,w
0110   0080           00376         movwf INDF
0111   3040           00377         movlw 0x40
0112   0084           00378         movwf FSR
0113                  00379 draw_loop
0113   0800           00380         movf INDF,W
0114   2???           00381         call write
                      00382 
0115   0A84           00383         incf FSR,F
0116   0804           00384         movf FSR,W
0117   3A50           00385         xorlw 0x50
0118   1903           00386         btfsc STATUS,Z
0119   2???           00387         call draw_next
011A   0804           00388         movf FSR,W
011B   3A60           00389         xorlw 0x60
011C   1D03           00390         btfss STATUS,Z
011D   2???           00391         goto draw_loop
011E   1103           00392         bcf STATUS,Z
011F   0186           00393         clrf PORTB
0120   0188           00394         clrf PORTD
0121   0187           00395         clrf PORTC
0122   0064           00396         clrwdt
0123   2???           00397         call delay_write
0124   01AC           00398         clrf ComRecieve
0125   0008           00399         return
0126                  00400 draw_next:                              ;переход на 2 строку
0126   0064           00401         clrwdt
0127   1007           00402         bcf PORTC, 0
0128   30C0           00403         movlw b'11000000'
0129   2???           00404         call write
012A   1407           00405         bsf PORTC,0 
012B   0008           00406         return
                      00407 
012C                  00408 redraw
012C   1007           00409         bcf PORTC,0x00
012D   3001           00410         movlw 0x01
012E   2???           00411         call write
012F   3002           00412         movlw 0x02
0130   2???           00413         call write
0131   0064           00414         clrwdt
0132   3038           00415         movlw 0x38
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0133   2???           00416         call write
0134   3006           00417         movlw 0x06
0135   2???           00418         call write
0136   300C           00419         movlw 0x0c
0137   2???           00420         call write
0138   1407           00421         bsf PORTC,0x00
0139   3040           00422         movlw 0x40
013A   0084           00423         movwf FSR
013B   1103           00424         bcf STATUS,Z
013C   3040           00425         movlw 0x40
013D   0084           00426         movwf FSR
013E                  00427 redraw_loop
013E   0800           00428         movf INDF,W
013F   2???           00429         call write
                      00430 
0140   0A84           00431         incf FSR,F
0141   0804           00432         movf FSR,W
0142   3A50           00433         xorlw 0x50
0143   1903           00434         btfsc STATUS,Z
0144   2???           00435         call redraw_next
0145   0804           00436         movf FSR,W
0146   3A60           00437         xorlw 0x60
0147   1D03           00438         btfss STATUS,Z
0148   2???           00439         goto redraw_loop
0149   1103           00440         bcf STATUS,Z
014A   0186           00441         clrf PORTB
014B   0188           00442         clrf PORTD
014C   0187           00443         clrf PORTC
014D   0064           00444         clrwdt
014E   2???           00445         call delay_write
014F   01AC           00446         clrf ComRecieve
0150   2???           00447         goto mode_select
0151                  00448 redraw_next:                            ;переход на 2 строку
0151   0064           00449         clrwdt
0152   1007           00450         bcf PORTC, 0
0153   30C0           00451         movlw b'11000000'
0154   2???           00452         call write
0155   1407           00453         bsf PORTC,0 
0156   0008           00454         return
                      00455 
                      00456 
0157                  00457 write_error                     ;Код ERROR
0157   1007           00458         bcf PORTC,0x00
0158   3001           00459         movlw 0x01
0159   2???           00460         call write
015A   0064           00461         clrwdt
015B   3038           00462         movlw 0x38
015C   2???           00463         call write
015D   3006           00464         movlw 0x06
015E   2???           00465         call write
015F   300C           00466         movlw 0x0c
0160   2???           00467         call write
0161   1407           00468         bsf PORTC,0x00
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00469 
0162   3045           00470         movlw 0x45                      ;Слово "ERROR"
0163   2???           00471         call write
0164   3052           00472         movlw 0x52
0165   2???           00473         call write
0166   3052           00474         movlw 0x52
0167   2???           00475         call write
0168   304F           00476         movlw 0x4F
0169   2???           00477         call write
016A   3052           00478         movlw 0x52
016B   2???           00479         call write
                      00480 
016C   3000           00481         movlw 0x00
016D   0086           00482         movwf PORTB
016E   3000           00483         movlw 0x00
016F   0087           00484         movwf PORTC
0170   0064           00485         clrwdt
0171   2???           00486         call error_delay
0172   2???           00487         goto redraw
0173   2???           00488         goto mode_select
0174                  00489 error_delay:                    ;Задержка для ERROR
0174   0064           00490         clrwdt
0175   303D           00491         movlw 0x3D
0176   00A8           00492         movwf ErrorTime
0177   0181           00493         clrf TMR0
0178                  00494 error_c
0178   0064           00495         clrwdt  
0179   30FF           00496         movlw 0xff
017A   0201           00497         subwf TMR0,0
017B   1D03           00498         btfss STATUS,0x02
017C   2???           00499         goto error_c
017D   2???           00500         goto error_d
017E                  00501 error_d
017E   0181           00502         clrf TMR0
017F   1103           00503         bcf STATUS,0x02
0180   0064           00504         clrwdt  
0181   0BA8           00505         decfsz ErrorTime,1
0182   2???           00506         goto error_c
0183   0008           00507         return
                      00508 
                      00509 
0184                  00510 s_segment_counter:
0184   1303           00511         bcf STATUS, RP1
0185   1283           00512         bcf STATUS, RP0
0186   3016           00513         movlw 0x16
0187   00A9           00514         movwf sCounter
0188                  00515 SC_Loop
0188   0064           00516         clrwdt
0189   2???           00517         call s_segment
018A   0BA9           00518         decfsz sCounter,f
018B   2???           00519         goto SC_Loop
018C   0008           00520         return
                      00521 
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

018D                  00522 s_segment:
018D   3000           00523         movlw 0x00
018E   0084           00524         movwf FSR
                      00525 
018F   1683           00526         bsf STATUS,RP0
0190   1303           00527         bcf STATUS,RP1
0191   3000           00528         movlw 0x00      
0192   0086           00529         movwf TRISB
0193   3000           00530         movlw 0x00      
0194   0088           00531         movwf TRISD
0195   1283           00532         bcf STATUS,RP0
0196   1303           00533         bcf STATUS,RP1
                      00534 
0197   1003           00535         bcf STATUS,C
0198   30FF           00536         movlw 0xff
0199   0088           00537         movwf PORTD
019A                  00538 s_segment_loop
019A   0C08           00539         rrf PORTD,0
019B   0088           00540         movwf PORTD
                      00541 
019C   082C           00542         movf ComRecieve,w
019D   00AF           00543         movwf SCheck
                      00544 
019E   15A1           00545         bsf MirrorCounter,0x03
019F                  00546 mirror_loop
Message[305]: Using default destination of 1 (file).
019F   0CAF           00547         rrf SCheck
Message[305]: Using default destination of 1 (file).
01A0   0DA2           00548         rlf MirrorReg
Message[305]: Using default destination of 1 (file).
01A1   0BA1           00549         decfsz MirrorCounter
01A2   2???           00550         goto mirror_loop
                      00551 
01A3   0908           00552         comf PORTD,0
01A4   05A2           00553         andwf MirrorReg,1
01A5   0622           00554         xorwf MirrorReg,0
                      00555         
01A6   1903           00556         btfsc STATUS,Z
01A7   2???           00557         goto s_segment_1
01A8   2???           00558         goto s_segment_0
01A9                  00559 s_segment_inc
01A9   0A84           00560         incf FSR,F
01AA   0804           00561         movf FSR,W
01AB   3A08           00562         xorlw 0x08
01AC   1D03           00563         btfss STATUS,Z
01AD   2???           00564         goto s_segment_loop
01AE   0008           00565         return
                      00566 
01AF                  00567 s_segment_0
01AF   303F           00568         movlw 0x3f
01B0   0086           00569         movwf PORTB
01B1   2???           00570         goto s_segment_delay
01B2                  00571 s_segment_1
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01B2   3006           00572         movlw 0x06
01B3   0086           00573         movwf PORTB
01B4   2???           00574         goto s_segment_delay
                      00575 
01B5                  00576 s_segment_delay
01B5   0181           00577         clrf TMR0
01B6                  00578 s_segment_c
01B6   0064           00579         clrwdt  
01B7   300A           00580         movlw 0x0A
01B8   0201           00581         subwf TMR0,0
01B9   1D03           00582         btfss STATUS,0x02
01BA   2???           00583         goto s_segment_c
01BB   2???           00584         goto s_segment_inc
                      00585 
                      00586 
01BC                  00587 ADC
01BC   2???           00588         call speaker
01BD   0186           00589         clrf PORTB
01BE   0188           00590         clrf PORTD
01BF   1303           00591         bcf STATUS, RP1
01C0   1683           00592         bsf STATUS, RP0
01C1   3004           00593         movlw 0x04
01C2   0089           00594         movwf TRISE
01C3   3080           00595         movlw 0x80
01C4   009F           00596         movwf ADCON1
01C5   1283           00597         bcf STATUS, RP0
01C6   3078           00598         movlw b'01111000'
01C7   009F           00599         movwf ADCON0
01C8                  00600 ADC_start
01C8   2???           00601         call scan_com
01C9   141F           00602         bsf ADCON0, ADON
01CA   1303           00603         bcf STATUS, RP1
01CB   1683           00604         bsf STATUS, RP0
01CC   3004           00605         movlw 0x04
01CD   0089           00606         movwf TRISE
01CE   3080           00607         movlw 0x80
01CF   009F           00608         movwf ADCON1
01D0   1283           00609         bcf STATUS, RP0
01D1   3005           00610         movlw .5
01D2   2???           00611         call Small_delay
01D3   151F           00612         bsf ADCON0,GO_DONE
01D4                  00613 ADC_Loop 
01D4   191F           00614         btfsc ADCON0,GO_DONE
01D5   2???           00615         goto ADC_Loop
                      00616                 
                      00617                 ;передача значения регуляятора
01D6   081E           00618         movf ADRESH,w
01D7   2???           00619         call write_com
01D8   1683           00620         bsf STATUS,RP0
01D9   081E           00621         movf ADRESL,w
01DA   2???           00622         call write_com
01DB   1283           00623         bcf STATUS,RP0
01DC   1303           00624         bcf STATUS,RP1
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00625                 
                      00626                 ;передача кода нажатой кнопки
01DD   2???           00627         call key_det
01DE   3000           00628         movlw 0x00
01DF                  00629 write_key
01DF   2???           00630         call write_com
01E0   2???           00631         call ADC_delay
01E1   2???           00632         goto ADC_start
                      00633 
01E2                  00634 ADC_delay:                      ;Задержка для пищалки
01E2   1283           00635         bcf STATUS,RP0
01E3   1303           00636         bcf STATUS,RP1
01E4   1103           00637         bcf STATUS,Z
01E5   0064           00638         clrwdt
01E6   3010           00639         movlw 0x10
01E7   00B1           00640         movwf ADCTime
01E8   0181           00641         clrf TMR0
01E9                  00642 ADC_c
01E9   0064           00643         clrwdt  
01EA   30FF           00644         movlw 0xff
01EB   0201           00645         subwf TMR0,0
01EC   1D03           00646         btfss STATUS,0x02
01ED   2???           00647         goto ADC_c
01EE   2???           00648         goto ADC_d
01EF                  00649 ADC_d
01EF   0181           00650         clrf TMR0
01F0   1103           00651         bcf STATUS,0x02
01F1   0064           00652         clrwdt  
01F2   0BB1           00653         decfsz ADCTime,1
01F3   2???           00654         goto ADC_c
01F4   0008           00655         return
01F5   2???           00656         goto ADC_start
                      00657 
01F6                  00658 Small_delay:
01F6   1303           00659         bcf STATUS, RP1
01F7   1283           00660         bcf STATUS, RP0
01F8   00B0           00661         movwf fCOUNTER
01F9                  00662 SD_Loop:
01F9   0064           00663         clrwdt
01FA   0BB0           00664         decfsz fCOUNTER,f
01FB   2???           00665         goto SD_Loop
01FC   0008           00666         return
01FD                  00667 key_det:
01FD   1303           00668         bcf STATUS,RP1
01FE   1683           00669         bsf STATUS,RP0
01FF   3038           00670         movlw b'00111000'       
0200   0085           00671         movwf TRISA
0201   3007           00672         movlw 0x07
0202   009F           00673         movwf ADCON1
0203   1283           00674         bcf STATUS,RP0
0204   1303           00675         bcf STATUS,RP1
0205   1103           00676         bcf STATUS,Z
0206   01B2           00677         clrf NumPressKey
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0207   30FF           00678         movlw 0xff
0208   00B3           00679         movwf PreKey
0209                  00680 col1 
0209   1405           00681         bsf PORTA,0
020A   1085           00682         bcf PORTA,1
020B   1105           00683         bcf PORTA,2
020C   3032           00684         movlw .50
020D   2???           00685         call Small_delay
020E   0000           00686         nop
020F   0805           00687         movf PORTA,w
0210   3938           00688         andlw 0x38
0211   30FF           00689         movlw 0xff
0212   1903           00690         btfsc STATUS,Z
0213   2???           00691         goto col2
0214   30FA           00692         movlw .250
0215   2???           00693         call Small_delay
0216   30FF           00694         movlw 0xff
0217   1985           00695         btfsc PORTA,3
0218   3001           00696         movlw .1
0219   1A05           00697         btfsc PORTA,4
021A   3004           00698         movlw .4
021B   1A85           00699         btfsc PORTA,5
021C   3007           00700         movlw .7
021D                  00701 col2
021D   06B3           00702         xorwf PreKey,1
021E   1D03           00703         btfss STATUS,Z
021F   2???           00704         goto write_key
0220   1103           00705         bcf STATUS,Z
0221   30FF           00706         movlw 0xff
0222   00B3           00707         movwf PreKey
0223   1005           00708         bcf PORTA,0
0224   1485           00709         bsf PORTA,1
0225   1105           00710         bcf PORTA,2
0226   3032           00711         movlw .50
0227   2???           00712         call Small_delay
0228   0000           00713         nop
0229   0805           00714         movf PORTA,w
022A   3938           00715         andlw 0x38
022B   30FF           00716         movlw 0xff
022C   1903           00717         btfsc STATUS,Z
022D   2???           00718         goto col3
022E   30FA           00719         movlw .250
022F   2???           00720         call Small_delay
0230   30FF           00721         movlw 0xff
0231   1985           00722         btfsc PORTA,3
0232   3002           00723         movlw .2
0233   1A05           00724         btfsc PORTA,4
0234   3005           00725         movlw .5
0235   1A85           00726         btfsc PORTA,5
0236   3008           00727         movlw .8
                      00728 
0237                  00729 col3
0237   06B3           00730         xorwf PreKey,1
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0238   1D03           00731         btfss STATUS,Z
0239   2???           00732         goto write_key
023A   1103           00733         bcf STATUS,Z
023B   30FF           00734         movlw 0xff
023C   00B3           00735         movwf PreKey
023D   1005           00736         bcf PORTA,0
023E   1085           00737         bcf PORTA,1
023F   1505           00738         bsf PORTA,2
0240   3032           00739         movlw .50
0241   2???           00740         call Small_delay
0242   0000           00741         nop
0243   0805           00742         movf PORTA,w
0244   3938           00743         andlw 0x38
0245   30FF           00744         movlw 0xff
0246   1903           00745         btfsc STATUS,Z
0247   2???           00746         goto cnt
0248   30FA           00747         movlw .250
0249   2???           00748         call Small_delay
024A   30FF           00749         movlw 0xff
024B   1985           00750         btfsc PORTA,3
024C   3003           00751         movlw .3
024D   1A05           00752         btfsc PORTA,4
024E   3006           00753         movlw .6
024F   1A85           00754         btfsc PORTA,5
0250   3009           00755         movlw .9
0251                  00756 cnt
0251   06B3           00757         xorwf PreKey,1
0252   1D03           00758         btfss STATUS,Z
0253   2???           00759         goto write_key
0254   0008           00760         return
                      00761 
0255                  00762 STOP
                      00763 
                      00764         end
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADC                               000001BC
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADCTime                           00000031
ADC_Loop                          000001D4
ADC_c                             000001E9
ADC_d                             000001EF
ADC_delay                         000001E2
ADC_start                         000001C8
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
AdressHitachi                     0000002A
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
ButtonCode                        0000002E
C                                 00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CC_Loop                           0000001C
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CKE                               00000006
CKP                               00000004
CREN                              00000004
CSRC                              00000007
CharHitachi                       0000002B
ColTime                           00000027
ComRecieve                        0000002C
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
D_A                               00000005
D_NOT_A                           00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
ErrorTime                         00000028
F                                 00000001
FERR                              00000002
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
MirrorCounter                     00000021
MirrorReg                         00000022
Mode                              00000020
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NumPressKey                       00000032
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
PreKey                            00000033
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
READ                              000000DA
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
RowTime                           00000026
S                                 00000003
SC_Loop                           00000188
SCheck                            0000002F
SD_Loop                           000001F9
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STOP                              00000255
SYNC                              00000004
ShiftB                            00000024
ShiftC                            00000023
ShiftD                            00000025
Small_delay                       000001F6
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
VoltageReg                        0000002D
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_BODEN_OFF                        00003FBF
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

_BODEN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_All                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_XT_OSC                           00003FFD
__16F877                          00000001
__DEBUG                           1
adress_check                      000000B4
begin                             00000004
clear_chars                       0000001A
cnt                               00000251
col1                              00000209
col2                              0000021D
col3                              00000237
col_c1                            00000040
col_delay                         0000003F
col_loop                          00000059
col_start                         00000047
column                            00000046
delay_write                       000000AD
draw_hitachi                      000000F1
draw_loop                         00000113
draw_next                         00000126
error1                            000000E4
error2                            000000E5
error_c                           00000178
error_d                           0000017E
error_delay                       00000174
fCOUNTER                          00000030
init_com                          000000CB
key_det                           000001FD
MPASM  5.42                          LULW.ASM   11-16-2020  13:56:46         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

less20                            000000BA
mirror_loop                       0000019F
mode_select                       00000029
more0                             000000B4
read_adress                       0000009D
read_char                         00000099
read_com                          000000D9
redraw                            0000012C
redraw_loop                       0000013E
redraw_next                       00000151
row                               0000007D
row_c2                            00000071
row_d2                            00000077
row_delay                         0000006D
row_loop                          0000008A
row_start                         0000007E
sCounter                          00000029
s_segment                         0000018D
s_segment_0                       000001AF
s_segment_1                       000001B2
s_segment_c                       000001B6
s_segment_counter                 00000184
s_segment_delay                   000001B5
s_segment_inc                     000001A9
s_segment_loop                    0000019A
scan_com                          00000025
speaker                           000000BF
wait_adress                       00000108
wait_char                         00000103
write                             000000A4
write_c2                          000000AE
write_check                       000000ED
write_com                         000000E7
write_error                       00000157
write_key                         000001DF

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     3 reported,    25 suppressed

